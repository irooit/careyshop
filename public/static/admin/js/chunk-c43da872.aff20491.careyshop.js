(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c43da872"],{"04e3":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cs-p"},[n("el-form",{attrs:{inline:!0,size:"small"}},[t.auth.del?n("el-form-item",[n("el-button",{attrs:{icon:"el-icon-delete",disabled:t.loading},on:{click:function(e){return t.handleDelete(null)}}},[t._v("批量删除")])],1):t._e(),n("cs-help",{staticStyle:{"padding-bottom":"19px"},attrs:{router:t.$route.path}})],1),n("el-table",{attrs:{data:t.currentTableData},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{align:"center",type:"selection",width:"55"}}),n("el-table-column",{attrs:{label:"商品咨询","min-width":"550"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"goods-consult"},[n("el-image",{staticClass:"goods-image cs-cp",attrs:{src:t._f("getPreviewUrl")(e.row.get_goods.attachment),fit:"contain",lazy:""},on:{click:function(n){return t.handleView(e.row.get_goods.goods_id)}}}),n("div",{staticClass:"goods-info cs-ml"},[n("span",{staticClass:"link",attrs:{title:e.row.get_goods.name},on:{click:function(n){return t.handleView(e.row.get_goods.goods_id)}}},[t._v(t._s(e.row.get_goods.name))]),n("div",{staticClass:"consult-content"},[n("p",[n("el-tag",{attrs:{type:t.statusMap[e.row.status].type,effect:"plain",size:"mini"}},[t._v(" "+t._s(t.statusMap[e.row.status].text)+" ")]),n("span",{staticClass:"cs-pl-5",class:{title:t.auth.detail},attrs:{title:e.row.content},on:{click:function(n){return t.openConsultDetail(e.row.goods_consult_id)}}},[t._v(t._s(e.row.content))])],1),n("p",[t._v(t._s(e.row.create_time))])])])],1)]}}])}),n("el-table-column",{attrs:{"min-width":"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"user-info"},[n("p",[n("span",[t._v(t._s(e.row.get_user.username||"游客"))]),e.row.get_user.level_icon?n("el-image",{staticClass:"level-icon",attrs:{src:e.row.get_user.level_icon,fit:"fill"}},[n("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[n("i",{staticClass:"el-icon-picture-outline"})])]):t._e()],1),n("p",[t._v(t._s(t.typeList[e.row.type]))])])]}}])}),n("el-table-column",{attrs:{label:"操作",align:"center","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.auth.show||t.auth.hide?n("el-button",{attrs:{size:"small",type:"text"},on:{click:function(n){return t.handleShow(e.$index)}}},[t._v(t._s(e.row.is_show?"隐藏":"显示"))]):t._e(),t.auth.del?n("el-button",{attrs:{size:"small",type:"text"},on:{click:function(n){return t.handleDelete(e.$index)}}},[t._v("删除")]):t._e()]}}])})],1)],1)},i=[],o=(n("4160"),n("c975"),n("159b"),n("5530")),a=n("ca00"),l=n("5880"),c=n("041d"),r={props:{loading:{default:!1},typeList:{default:function(){}},tableData:{default:function(){return[]}}},data:function(){return{currentTableData:[],multipleSelection:[],auth:{show:!1,hide:!1,del:!1,detail:!1},statusMap:{0:{text:"待回复",type:"warning"},1:{text:"已回复",type:"success"}}}},filters:{getPreviewUrl:function(t){return Array.isArray(t)&&t.length>0&&t[0].source?a["a"].getImageCodeUrl(t[0].source,"goods_image_x80"):""}},watch:{tableData:{handler:function(t){this.currentTableData=t},immediate:!0}},activated:function(){this.updateChange({name:"goods-opinion-consult",source:this.currentTableData,key:"goods_consult_id"})},mounted:function(){this._validationAuth()},methods:Object(o["a"])(Object(o["a"])({},Object(l["mapActions"])("careyshop/update",["updateChange"])),{},{_validationAuth:function(){this.auth.show=this.$permission("/goods/opinion/consult/show"),this.auth.hide=this.$permission("/goods/opinion/consult/hide"),this.auth.del=this.$permission("/goods/opinion/consult/del"),this.auth.detail=this.$permission("/goods/opinion/consult/detail")},_getIdList:function(t){null===t&&(t=this.multipleSelection);var e=[];return Array.isArray(t)?t.forEach((function(t){e.push(t.goods_consult_id)})):e.push(this.currentTableData[t].goods_consult_id),e},handleSelectionChange:function(t){this.multipleSelection=t},handleShow:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this._getIdList(t);if(0!==i.length){if(!s){var a=this.currentTableData[t],l=a.is_show?0:1;if(a.is_show>1)return;if(0===l&&!this.auth.show)return;if(1===l&&!this.auth.hide)return;return this.$set(this.currentTableData,t,Object(o["a"])(Object(o["a"])({},a),{},{is_show:2})),void r(i,l,this)}this.$confirm("确定要执行该操作吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then((function(){r(i,n,e)})).catch((function(){}))}else this.$message.error("请选择要操作的数据");function r(t,e,n){Object(c["e"])(t,e).then((function(){n.currentTableData.forEach((function(s,i){-1!==t.indexOf(s.goods_consult_id)&&n.$set(n.currentTableData,i,Object(o["a"])(Object(o["a"])({},s),{},{is_show:e}))})),n.$message.success("操作成功")}))}},handleDelete:function(t){var e=this,n=this._getIdList(t);0!==n.length?this.$confirm("确定要执行该操作吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then((function(){Object(c["a"])(n).then((function(){a["a"].deleteDataList(e.currentTableData,n,"goods_consult_id"),e.currentTableData.length<=0&&e.$emit("refresh",!0),e.$message.success("操作成功")}))})).catch((function(){})):this.$message.error("请选择要操作的数据")},openConsultDetail:function(t){this.auth.detail&&this.$router.push({name:"goods-opinion-consult-detail",params:{goods_consult_id:t}})},handleView:function(t){this.$router.push({name:"goods-admin-view",params:{goods_id:t}})}})},u=r,d=(n("1c65"),n("2877")),h=Object(d["a"])(u,s,i,!1,null,"eac03d16",null);e["default"]=h.exports},"1c65":function(t,e,n){"use strict";var s=n("9802"),i=n.n(s);i.a},9802:function(t,e,n){}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ebf8fd5"],{1972:function(t,e,u){"use strict";u.r(e);var n=function(){var t=this,e=t.$createElement,u=t._self._c||e;return u("cs-container",[u("page-header",{ref:"header",attrs:{slot:"header",loading:t.loading,module:t.module,group:t.group},on:{submit:t.handleSubmit},slot:"header"}),u("page-main",{ref:"rule",attrs:{loading:t.loading,"tree-data":t.tree,module:t.module,group:t.group,whitelist:t.whitelist},on:{refresh:t.handleRefresh}})],1)},r=[],o=(u("99af"),u("4160"),u("d3b7"),u("3ca3"),u("159b"),u("ddb0"),u("a308")),a=u("c784"),d=u("ca7e"),i={name:"setting-auth-rule",components:{PageHeader:function(){return u.e("chunk-2d0cbaf4").then(u.bind(null,"4b5e"))},PageMain:function(){return u.e("chunk-486757fc").then(u.bind(null,"8063"))}},data:function(){return{loading:!1,tree:[],module:{},group:{},whitelist:[]}},mounted:function(){var t=this;Promise.all([Object(o["e"])(),Object(a["c"])({status:1})]).then((function(e){t.module=e[0]||{},e[1].data&&e[1].data.forEach((function(e){t.group[e.group_id]=e}))})).then((function(){t.handleSubmit()}))},methods:{handleRefresh:function(){var t=this;this.$nextTick((function(){t.$refs.header.handleFormSubmit()}))},handleSubmit:function(t){var e=this;this.loading=!0,Object(d["c"])(t).then((function(u){e.tree=[];var n=[];for(var r in e.module)Object.prototype.hasOwnProperty.call(e.module,r)&&(t&&t.module&&t.module!==r||(n[r]=e.tree.push({rule_id:r,name:e.module[r],children:[],system:!0,module:r,status:1})));u.data&&u.data.forEach((function(t){e.tree[n[t.module]-1].children.push(t),4===t.group_id&&"api"===t.module&&(e.whitelist=e.whitelist.concat(t.menu_auth))})),e.$refs.rule&&(e.$refs.rule.filterText="",e.$refs.rule.resetForm(),e.$refs.rule.resetElements())})).finally((function(){e.loading=!1}))}}},c=i,l=u("2877"),s=Object(l["a"])(c,n,r,!1,null,null,null);e["default"]=s.exports},c784:function(t,e,u){"use strict";u.d(e,"a",(function(){return a})),u.d(e,"d",(function(){return d})),u.d(e,"b",(function(){return i})),u.d(e,"c",(function(){return c})),u.d(e,"f",(function(){return l})),u.d(e,"e",(function(){return s}));var n=u("5530"),r=u("bc07"),o="/v1/auth_group";function a(t){return Object(r["a"])({url:o,method:"post",data:Object(n["a"])({method:"add.auth.group.item"},t)})}function d(t){return Object(r["a"])({url:o,method:"post",data:Object(n["a"])({method:"set.auth.group.item"},t)})}function i(t){return Object(r["a"])({url:o,method:"post",data:{method:"del.auth.group.item",group_id:t}})}function c(t){return Object(r["a"])({url:o,method:"post",data:Object(n["a"])({method:"get.auth.group.list"},t)})}function l(t,e){return Object(r["a"])({url:o,method:"post",data:{method:"set.auth.group.status",group_id:t,status:e}})}function s(t,e){return Object(r["a"])({url:o,method:"post",data:{method:"set.auth.group.sort",group_id:t,sort:e}})}},ca7e:function(t,e,u){"use strict";u.d(e,"a",(function(){return a})),u.d(e,"e",(function(){return d})),u.d(e,"b",(function(){return i})),u.d(e,"c",(function(){return c})),u.d(e,"f",(function(){return l})),u.d(e,"d",(function(){return s}));var n=u("5530"),r=u("bc07"),o="/v1/auth_rule";function a(t){return Object(r["a"])({url:o,method:"post",data:Object(n["a"])({method:"add.auth.rule.item"},t)})}function d(t){return Object(r["a"])({url:o,method:"post",data:Object(n["a"])({method:"set.auth.rule.item"},t)})}function i(t){return Object(r["a"])({url:o,method:"post",data:{method:"del.auth.rule.list",rule_id:t}})}function c(t){return Object(r["a"])({url:o,method:"post",data:Object(n["a"])({method:"get.auth.rule.list"},t)})}function l(t,e){return Object(r["a"])({url:o,method:"post",data:{method:"set.auth.rule.status",rule_id:t,status:e}})}function s(t){return Object(r["a"])({url:o,method:"post",data:{method:"set.auth.rule.index",rule_id:t}})}}}]);
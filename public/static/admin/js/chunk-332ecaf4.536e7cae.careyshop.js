(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-332ecaf4"],{a2a9:function(t,e,o){"use strict";o.d(e,"a",(function(){return r})),o.d(e,"l",(function(){return s})),o.d(e,"g",(function(){return l})),o.d(e,"c",(function(){return c})),o.d(e,"h",(function(){return d})),o.d(e,"p",(function(){return u})),o.d(e,"o",(function(){return h})),o.d(e,"n",(function(){return f})),o.d(e,"q",(function(){return g})),o.d(e,"f",(function(){return m})),o.d(e,"j",(function(){return p})),o.d(e,"d",(function(){return b})),o.d(e,"m",(function(){return _})),o.d(e,"b",(function(){return v})),o.d(e,"e",(function(){return k})),o.d(e,"i",(function(){return w})),o.d(e,"k",(function(){return y}));var n=o("5530"),i=o("bc07"),a="/v1/goods";function r(t){return Object(i["a"])({url:a,method:"post",data:Object(n["a"])({method:"add.goods.item"},t)})}function s(t){return Object(i["a"])({url:a,method:"post",data:Object(n["a"])({method:"set.goods.item"},t)})}function l(t){return Object(i["a"])({url:a,method:"post",data:{method:"get.goods.item",goods_id:t}})}function c(t,e){return Object(i["a"])({url:a,method:"post",data:{method:"del.goods.list",goods_id:t,is_delete:e}})}function d(t){return Object(i["a"])({url:a,method:"post",data:{method:"get.goods.select",goods_id:t}})}function u(t,e){return Object(i["a"])({url:a,method:"post",data:{method:"set.recommend.goods.list",goods_id:t,is_recommend:e}})}function h(t,e){return Object(i["a"])({url:a,method:"post",data:{method:"set.new.goods.list",goods_id:t,is_new:e}})}function f(t,e){return Object(i["a"])({url:a,method:"post",data:{method:"set.hot.goods.list",goods_id:t,is_hot:e}})}function g(t,e){return Object(i["a"])({url:a,method:"post",data:{method:"set.shelves.goods.list",goods_id:t,status:e}})}function m(t){return Object(i["a"])({url:a,method:"post",data:{method:"get.goods.attr.list",goods_id:t}})}function p(t){return Object(i["a"])({url:a,method:"post",data:{method:"get.goods.spec.list",goods_id:t}})}function b(t){return Object(i["a"])({url:a,method:"post",data:Object(n["a"])({method:"get.goods.admin.list"},t)})}function _(t,e){return Object(i["a"])({url:a,method:"post",data:{method:"set.goods.sort",goods_id:t,sort:e}})}function v(t){return Object(i["a"])({url:a,method:"post",data:{method:"copy.goods.item",goods_id:t}})}function k(t){return Object(i["a"])({url:a,method:"post",data:{method:"get.goods.attr.config",goods_id:t}})}function w(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(i["a"])({url:a,method:"post",data:{method:"get.goods.spec.config",goods_id:t,key_to_array:e}})}function y(t){return Object(i["a"])({url:a,method:"post",data:{method:"get.goods.spec.menu",goods_id:t}})}},c685:function(t,e,o){},df18:function(t,e,o){"use strict";var n=o("c685"),i=o.n(n);i.a},e7ff:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"goods-control",on:{click:t.handleShowDlg}},[t._t("control"),o("el-dialog",{attrs:{title:"商品选取",visible:t.visible,"append-to-body":!0,"close-on-click-modal":!1,width:"760px"},on:{"update:visible":function(e){t.visible=e},open:t.handleOpen}},[o("el-form",{staticStyle:{"margin-top":"-25px"},attrs:{model:t.form,size:"small"},nativeOn:{submit:function(t){t.preventDefault()}}},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:10}},[o("el-form-item",[o("el-radio-group",{on:{change:function(e){return t.handleSubmit(!0)}},model:{value:t.isSelection,callback:function(e){t.isSelection=e},expression:"isSelection"}},[o("el-radio-button",{attrs:{label:!1}},[t._v("全部")]),o("el-radio-button",{attrs:{label:!0}},[t._v("已选")])],1),o("el-button-group",{staticClass:"cs-ml-10"},[o("el-button",{attrs:{icon:"el-icon-circle-close"},on:{click:t.clearedSelection}},[t._v("清除")]),o("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:function(e){return t.handleSubmit(!0)}}},[t._v("刷新")])],1)],1)],1),o("el-col",{attrs:{span:14}},[o("el-form-item",{attrs:{prop:"keywords"}},[o("el-input",{attrs:{placeholder:"输入商品名称进行搜索",clearable:!0,size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSubmit(!0)}},model:{value:t.form.keywords,callback:function(e){t.$set(t.form,"keywords",e)},expression:"form.keywords"}},[o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){return t.handleSubmit(!0)}},slot:"append"})],1)],1)],1)],1)],1),o("el-table",{ref:"multipleTable",attrs:{data:t.tableData,"row-key":"goods_id"},on:{"selection-change":t.handleSelectionChange}},[o("el-table-column",{attrs:{"reserve-selection":!0,align:"center",type:"selection",width:"50"}}),o("el-table-column",{attrs:{label:"名称",prop:"name"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-image",{staticClass:"goods-image",attrs:{src:t._f("getPreviewUrl")(e.row.attachment),fit:"contain",lazy:""},on:{click:function(o){return t.handleViewGoods(e.row.goods_id)}}}),o("div",{staticClass:"goods-info"},[o("div",{staticClass:"name",attrs:{title:e.row.name},on:{click:function(o){return t.handleViewGoods(e.row.goods_id)}}},[t._v(t._s(e.row.name))]),o("p",{staticClass:"price"},[o("span",{staticStyle:{color:"#909399"}},[t._v("本店价：")]),t._v(t._s(t._f("getNumber")(e.row.shop_price)))])])]}}])}),o("el-table-column",{attrs:{label:"库存",prop:"store_qty",width:"100"}}),o("el-table-column",{attrs:{label:"销量",prop:"sales_sum",width:"100"}}),o("el-table-column",{attrs:{label:"状态",prop:"status",align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(e.row.status?"出售中":"已下架"))])]}}])})],1),o("page-footer",{staticStyle:{margin:"0",padding:"20px 0 0 0"},attrs:{current:t.page.current,size:t.page.size,total:t.page.total,"is-size":!1},on:{change:t.handlePaginationChange}}),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small"},on:{click:function(e){t.visible=!1}}},[t._v("取消")]),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleConfirm}},[t._v("确定")])],1)],1),o("cs-goods-drawer",{ref:"goodsDrawer"})],2)},i=[],a=(o("4160"),o("d3b7"),o("159b"),o("5530")),r=o("b85c"),s=o("ca00"),l=o("a2a9"),c={name:"cs-goods-select",components:{csGoodsDrawer:function(){return o.e("chunk-1049f239").then(o.bind(null,"fd20"))},PageFooter:function(){return o.e("chunk-2d225417").then(o.bind(null,"e42d"))}},props:{confirm:{type:Function},checkList:{type:Array,required:!1,default:function(){return[]}}},data:function(){return{visible:!1,isCheck:!1,isSelection:!1,tableData:[],multipleSelection:[],form:{keywords:void 0,goods_id:void 0},page:{current:1,size:10,total:0}}},filters:{getPreviewUrl:function(t){return Array.isArray(t)&&t.length>0&&t[0].source?s["a"].getImageCodeUrl(t[0].source,"goods_image_x80"):""},getNumber:function(t){return s["a"].getNumber(t)}},methods:{handlePaginationChange:function(t){var e=this;this.page=t,this.$nextTick((function(){e.handleSubmit()}))},handleShowDlg:function(){this.visible=!0},handleOpen:function(){var t=this;if(!this.isCheck&&this.checkList.length){var e,o=[],n=Object(r["a"])(this.checkList);try{for(n.s();!(e=n.n()).done;){var i=e.value;Object.prototype.hasOwnProperty.call(i,"goods_id")&&o.push(i.goods_id)}}catch(a){n.e(a)}finally{n.f()}Object(l["h"])(o).then((function(e){t.$nextTick((function(){e.data&&e.data.forEach((function(e){t.$refs.multipleTable.toggleRowSelection(e,!0)}))}))})).then((function(){t.tableData.length||t.handleSubmit(!0)}))}else this.tableData.length||this.handleSubmit(!0);this.isCheck=!0},handleSubmit:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(this.page.current=1);var o=Object(a["a"])({},this.form);this.isSelection&&(o.goods_id=[],this.multipleSelection.forEach((function(t){o.goods_id.push(t.goods_id)}))),Object(l["d"])(Object(a["a"])(Object(a["a"])({},o),{},{page_no:this.page.current,page_size:this.page.size})).then((function(e){t.tableData=e.data.items||[],t.page.total=e.data.total_result}))},handleSelectionChange:function(t){this.multipleSelection=t},clearedSelection:function(){var t=this;this.$nextTick((function(){t.$refs.multipleTable.clearSelection()}))},handleConfirm:function(){this.$emit("confirm",this.multipleSelection),this.visible=!1},handleViewGoods:function(t){var e=this;this.$nextTick((function(){e.$refs.goodsDrawer.show(t)}))}}},d=c,u=(o("df18"),o("2877")),h=Object(u["a"])(d,n,i,!1,null,"72a69490",null);e["default"]=h.exports}}]);
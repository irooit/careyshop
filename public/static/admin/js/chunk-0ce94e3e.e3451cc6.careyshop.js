(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ce94e3e","chunk-9b341698"],{1610:function(e,t,o){"use strict";o.d(t,"a",(function(){return i})),o.d(t,"g",(function(){return s})),o.d(t,"b",(function(){return c})),o.d(t,"i",(function(){return l})),o.d(t,"f",(function(){return u})),o.d(t,"e",(function(){return d})),o.d(t,"j",(function(){return p})),o.d(t,"h",(function(){return m})),o.d(t,"k",(function(){return f})),o.d(t,"c",(function(){return b})),o.d(t,"d",(function(){return _}));var r=o("5530"),a=o("bc07"),n="/v1/goods_attribute";function i(e){return Object(a["a"])({url:n,method:"post",data:Object(r["a"])({method:"add.goods.attribute.body.item"},e)})}function s(e){return Object(a["a"])({url:n,method:"post",data:Object(r["a"])({method:"set.goods.attribute.body.item"},e)})}function c(e){return Object(a["a"])({url:n,method:"post",data:Object(r["a"])({method:"add.goods.attribute.item"},e)})}function l(e){return Object(a["a"])({url:n,method:"post",data:Object(r["a"])({method:"set.goods.attribute.item"},e)})}function u(e){return Object(a["a"])({url:n,method:"post",data:Object(r["a"])({method:"get.goods.attribute.page"},e)})}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(a["a"])({url:n,method:"post",data:{method:"get.goods.attribute.list",goods_type_id:e,attribute_all:t}})}function p(e,t){return Object(a["a"])({url:n,method:"post",data:{method:"set.goods.attribute.key",goods_attribute_id:e,attr_index:t}})}function m(e,t){return Object(a["a"])({url:n,method:"post",data:{method:"set.goods.attribute.important",goods_attribute_id:e,is_important:t}})}function f(e,t){return Object(a["a"])({url:n,method:"post",data:{method:"set.goods.attribute.sort",goods_attribute_id:e,sort:t}})}function b(e){return Object(a["a"])({url:n,method:"post",data:{method:"del.goods.attribute.list",goods_attribute_id:e}})}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(a["a"])({url:n,method:"post",data:{method:"get.goods.attribute.data",goods_type_id:e,attribute_all:t}})}},4239:function(e,t,o){"use strict";o.d(t,"a",(function(){return i})),o.d(t,"e",(function(){return s})),o.d(t,"b",(function(){return c})),o.d(t,"g",(function(){return l})),o.d(t,"c",(function(){return u})),o.d(t,"d",(function(){return d})),o.d(t,"f",(function(){return p}));var r=o("5530"),a=o("bc07"),n="/v1/brand";function i(e){return Object(a["a"])({url:n,method:"post",data:Object(r["a"])({method:"add.brand.item"},e)})}function s(e){return Object(a["a"])({url:n,method:"post",data:Object(r["a"])({method:"set.brand.item"},e)})}function c(e){return Object(a["a"])({url:n,method:"post",data:{method:"del.brand.list",brand_id:e}})}function l(e,t){return Object(a["a"])({url:n,method:"post",data:{method:"set.brand.status",brand_id:e,status:t}})}function u(e){return Object(a["a"])({url:n,method:"post",data:Object(r["a"])({method:"get.brand.list"},e)})}function d(e){return Object(a["a"])({url:n,method:"post",data:Object(r["a"])({method:"get.brand.select"},e)})}function p(e,t){return Object(a["a"])({url:n,method:"post",data:{method:"set.brand.sort",brand_id:e,sort:t}})}},"498a":function(e,t,o){"use strict";var r=o("23e7"),a=o("58a8").trim,n=o("c8d2");r({target:"String",proto:!0,forced:n("trim")},{trim:function(){return a(this)}})},"58ef":function(e,t,o){"use strict";var r=o("af98"),a=o.n(r);a.a},"7f04":function(e,t,o){"use strict";o.d(t,"a",(function(){return i})),o.d(t,"e",(function(){return s})),o.d(t,"b",(function(){return c})),o.d(t,"c",(function(){return l})),o.d(t,"d",(function(){return u}));var r=o("5530"),a=o("bc07"),n="/v1/goods_type";function i(e){return Object(a["a"])({url:n,method:"post",data:{method:"add.goods.type.item",type_name:e}})}function s(e){return Object(a["a"])({url:n,method:"post",data:Object(r["a"])({method:"set.goods.type.item"},e)})}function c(e){return Object(a["a"])({url:n,method:"post",data:{method:"del.goods.type.list",goods_type_id:e}})}function l(e){return Object(a["a"])({url:n,method:"post",data:Object(r["a"])({method:"get.goods.type.list"},e)})}function u(e){return Object(a["a"])({url:n,method:"post",data:Object(r["a"])({method:"get.goods.type.select"},e)})}},a2a9:function(e,t,o){"use strict";o.d(t,"a",(function(){return i})),o.d(t,"l",(function(){return s})),o.d(t,"g",(function(){return c})),o.d(t,"c",(function(){return l})),o.d(t,"h",(function(){return u})),o.d(t,"p",(function(){return d})),o.d(t,"o",(function(){return p})),o.d(t,"n",(function(){return m})),o.d(t,"q",(function(){return f})),o.d(t,"f",(function(){return b})),o.d(t,"j",(function(){return _})),o.d(t,"d",(function(){return h})),o.d(t,"m",(function(){return g})),o.d(t,"b",(function(){return v})),o.d(t,"e",(function(){return y})),o.d(t,"i",(function(){return k})),o.d(t,"k",(function(){return x}));var r=o("5530"),a=o("bc07"),n="/v1/goods";function i(e){return Object(a["a"])({url:n,method:"post",data:Object(r["a"])({method:"add.goods.item"},e)})}function s(e){return Object(a["a"])({url:n,method:"post",data:Object(r["a"])({method:"set.goods.item"},e)})}function c(e){return Object(a["a"])({url:n,method:"post",data:{method:"get.goods.item",goods_id:e}})}function l(e,t){return Object(a["a"])({url:n,method:"post",data:{method:"del.goods.list",goods_id:e,is_delete:t}})}function u(e){return Object(a["a"])({url:n,method:"post",data:{method:"get.goods.select",goods_id:e}})}function d(e,t){return Object(a["a"])({url:n,method:"post",data:{method:"set.recommend.goods.list",goods_id:e,is_recommend:t}})}function p(e,t){return Object(a["a"])({url:n,method:"post",data:{method:"set.new.goods.list",goods_id:e,is_new:t}})}function m(e,t){return Object(a["a"])({url:n,method:"post",data:{method:"set.hot.goods.list",goods_id:e,is_hot:t}})}function f(e,t){return Object(a["a"])({url:n,method:"post",data:{method:"set.shelves.goods.list",goods_id:e,status:t}})}function b(e){return Object(a["a"])({url:n,method:"post",data:{method:"get.goods.attr.list",goods_id:e}})}function _(e){return Object(a["a"])({url:n,method:"post",data:{method:"get.goods.spec.list",goods_id:e}})}function h(e){return Object(a["a"])({url:n,method:"post",data:Object(r["a"])({method:"get.goods.admin.list"},e)})}function g(e,t){return Object(a["a"])({url:n,method:"post",data:{method:"set.goods.sort",goods_id:e,sort:t}})}function v(e){return Object(a["a"])({url:n,method:"post",data:{method:"copy.goods.item",goods_id:e}})}function y(e){return Object(a["a"])({url:n,method:"post",data:{method:"get.goods.attr.config",goods_id:e}})}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(a["a"])({url:n,method:"post",data:{method:"get.goods.spec.config",goods_id:e,key_to_array:t}})}function x(e){return Object(a["a"])({url:n,method:"post",data:{method:"get.goods.spec.menu",goods_id:e}})}},af98:function(e,t,o){},b9ad:function(e,t,o){"use strict";o.d(t,"a",(function(){return i})),o.d(t,"f",(function(){return s})),o.d(t,"e",(function(){return c})),o.d(t,"d",(function(){return l})),o.d(t,"c",(function(){return u})),o.d(t,"b",(function(){return d})),o.d(t,"g",(function(){return p})),o.d(t,"h",(function(){return m}));var r=o("5530"),a=o("bc07"),n="/v1/spec";function i(e){return Object(a["a"])({url:n,method:"post",data:Object(r["a"])({method:"add.goods.spec.item"},e)})}function s(e){return Object(a["a"])({url:n,method:"post",data:Object(r["a"])({method:"set.goods.spec.item"},e)})}function c(e){return Object(a["a"])({url:n,method:"post",data:Object(r["a"])({method:"get.goods.spec.page"},e)})}function l(e){return Object(a["a"])({url:n,method:"post",data:{method:"get.goods.spec.list",goods_type_id:e}})}function u(){return Object(a["a"])({url:n,method:"post",data:{method:"get.goods.spec.all"}})}function d(e){return Object(a["a"])({url:n,method:"post",data:{method:"del.goods.spec.list",spec_id:e}})}function p(e,t){return Object(a["a"])({url:n,method:"post",data:{method:"set.goods.spec.key",spec_id:e,spec_index:t}})}function m(e,t){return Object(a["a"])({url:n,method:"post",data:{method:"set.goods.spec.sort",spec_id:e,sort:t}})}},c54e:function(e,t,o){"use strict";o.d(t,"a",(function(){return i})),o.d(t,"f",(function(){return s})),o.d(t,"b",(function(){return c})),o.d(t,"c",(function(){return l})),o.d(t,"d",(function(){return u})),o.d(t,"g",(function(){return d})),o.d(t,"e",(function(){return p}));var r=o("5530"),a=o("bc07"),n="/v1/goods_category";function i(e){return Object(a["a"])({url:n,method:"post",data:Object(r["a"])({method:"add.goods.category.item"},e)})}function s(e){return Object(a["a"])({url:n,method:"post",data:Object(r["a"])({method:"set.goods.category.item"},e)})}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(a["a"])({url:n,method:"post",data:{method:"del.goods.category.list",goods_category_id:e,not_empty:t}})}function l(e){return Object(a["a"])({url:n,method:"post",data:{method:"get.goods.category.item",goods_category_id:e}})}function u(e){return Object(a["a"])({url:n,method:"post",data:Object(r["a"])({method:"get.goods.category.list"},e)})}function d(e,t){return Object(a["a"])({url:n,method:"post",data:{method:"set.goods.category.status",goods_category_id:e,status:t}})}function p(e){return Object(a["a"])({url:n,method:"post",data:{method:"set.goods.category.index",goods_category_id:e}})}},c8d2:function(e,t,o){var r=o("d039"),a=o("5899"),n="​᠎";e.exports=function(e){return r((function(){return!!a[e]()||n[e]()!=n||a[e].name!==e}))}},fc45:function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"cs-p"},[o("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[o("div",{staticClass:"cs-tc clearfix",attrs:{slot:"header"},slot:"header"},[o("span",[e._v(e._s(e.stateMap[e.state]))])]),o("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"基础设置",name:e.tabList[0]}},[e.activeName===e.tabList[0]||e.confirmLoading?o("el-form",{ref:"form_"+e.tabList[0],attrs:{model:e.currentForm,rules:e.rules.form_basic,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"名称",prop:"name"}},[o("el-input",{attrs:{placeholder:"请输入商品名称",maxlength:"200","show-word-limit":"",clearable:!0},model:{value:e.currentForm.name,callback:function(t){e.$set(e.currentForm,"name",t)},expression:"currentForm.name"}})],1),o("el-form-item",{attrs:{label:"短名称",prop:"short_name"}},[o("el-input",{attrs:{placeholder:"可输入商品短名称，适用于移动端显示",maxlength:"50","show-word-limit":"",clearable:!0},model:{value:e.currentForm.short_name,callback:function(t){e.$set(e.currentForm,"short_name",t)},expression:"currentForm.short_name"}})],1),o("el-form-item",{attrs:{label:"促销语",prop:"product_name"}},[o("el-input",{attrs:{placeholder:"可输入商品促销语",maxlength:"100","show-word-limit":"",clearable:!0},model:{value:e.currentForm.product_name,callback:function(t){e.$set(e.currentForm,"product_name",t)},expression:"currentForm.product_name"}})],1),o("el-form-item",{attrs:{label:"分类",prop:"goods_category_id"}},[o("el-cascader",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择商品分类，试试搜索：分类",options:e.catData,props:e.cascaderProps,filterable:"",clearable:""},model:{value:e.currentForm.goods_category_id,callback:function(t){e.$set(e.currentForm,"goods_category_id",t)},expression:"currentForm.goods_category_id"}})],1),o("el-form-item",{attrs:{label:"品牌",prop:"brand_id"}},[o("el-select",{staticStyle:{width:"320px"},attrs:{placeholder:"可选择商品品牌，试试搜索：品牌",filterable:"",clearable:""},model:{value:e.currentForm.brand_id,callback:function(t){e.$set(e.currentForm,"brand_id",t)},expression:"currentForm.brand_id"}},e._l(e.brandData,(function(t){return o("el-option",{key:t.brand_id,attrs:{label:t.name,value:t.brand_id}},[o("span",{staticClass:"brand-name"},[e._v(e._s(t.name))]),o("span",{staticClass:"brand-category"},[e._v(e._s(t.category_name))])])})),1)],1),o("el-form-item",{attrs:{label:"货号",prop:"goods_code"}},[o("el-input",{attrs:{placeholder:"可输入商品货号，为空系统将自动生成",clearable:!0},model:{value:e.currentForm.goods_code,callback:function(t){e.$set(e.currentForm,"goods_code",t)},expression:"currentForm.goods_code"}})],1),o("el-form-item",{attrs:{label:"SPU",prop:"goods_spu"}},[o("el-input",{attrs:{placeholder:"可输入商品SPU",clearable:!0},model:{value:e.currentForm.goods_spu,callback:function(t){e.$set(e.currentForm,"goods_spu",t)},expression:"currentForm.goods_spu"}})],1),o("el-form-item",{attrs:{label:"SKU",prop:"goods_sku"}},[o("el-input",{attrs:{placeholder:"可输入商品SKU",clearable:!0},model:{value:e.currentForm.goods_sku,callback:function(t){e.$set(e.currentForm,"goods_sku",t)},expression:"currentForm.goods_sku"}})],1),o("el-form-item",{attrs:{label:"条码",prop:"bar_code"}},[o("el-input",{attrs:{placeholder:"可输入商品条码",clearable:!0},model:{value:e.currentForm.bar_code,callback:function(t){e.$set(e.currentForm,"bar_code",t)},expression:"currentForm.bar_code"}})],1),o("el-form-item",{attrs:{label:"计量单位",prop:"unit"}},[o("el-input",{attrs:{placeholder:"可输入商品计量单位，例如：件、个",clearable:!0},model:{value:e.currentForm.unit,callback:function(t){e.$set(e.currentForm,"unit",t)},expression:"currentForm.unit"}})],1),o("el-form-item",{attrs:{label:"计量方式",prop:"measure_type"}},[o("el-radio-group",{model:{value:e.currentForm.measure_type,callback:function(t){e.$set(e.currentForm,"measure_type",t)},expression:"currentForm.measure_type"}},[o("el-radio",{attrs:{label:0}},[e._v("重量")]),o("el-radio",{attrs:{label:1}},[e._v("计件")]),o("el-radio",{attrs:{label:2}},[e._v("体积")])],1)],1),o("el-form-item",{attrs:{label:"商品计量",prop:"measure"}},[o("el-input-number",{attrs:{"controls-position":"right",precision:2,min:0},model:{value:e.currentForm.measure,callback:function(t){e.$set(e.currentForm,"measure",t)},expression:"currentForm.measure"}})],1),o("el-form-item",{attrs:{label:"实际库存",prop:"store_qty"}},[o("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:e.currentForm.store_qty,callback:function(t){e.$set(e.currentForm,"store_qty",t)},expression:"currentForm.store_qty"}}),o("div",{staticClass:"help-block"},[o("span",[e._v("多规格商品将自动求和所有规格的库存做为实际库存")])])],1),o("el-form-item",{attrs:{label:"排序值",prop:"sort"}},[o("el-input-number",{attrs:{"controls-position":"right",min:0,max:255},model:{value:e.currentForm.sort,callback:function(t){e.$set(e.currentForm,"sort",t)},expression:"currentForm.sort"}}),o("div",{staticClass:"help-block"},[o("span",[e._v("排序值将影响商品排列的顺序，数值越小越靠前")])])],1),o("el-form-item",{attrs:{label:"上架状态",prop:"status"}},[o("el-radio-group",{model:{value:e.currentForm.status,callback:function(t){e.$set(e.currentForm,"status",t)},expression:"currentForm.status"}},[o("el-radio",{attrs:{label:1}},[e._v("出售中")]),o("el-radio",{attrs:{label:0}},[e._v("已下架")])],1)],1),o("el-form-item",{attrs:{label:"是否推荐",prop:"is_recommend"}},[o("el-radio-group",{model:{value:e.currentForm.is_recommend,callback:function(t){e.$set(e.currentForm,"is_recommend",t)},expression:"currentForm.is_recommend"}},[o("el-radio",{attrs:{label:1}},[e._v("是")]),o("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),o("el-form-item",{attrs:{label:"是否新品",prop:"is_new"}},[o("el-radio-group",{model:{value:e.currentForm.is_new,callback:function(t){e.$set(e.currentForm,"is_new",t)},expression:"currentForm.is_new"}},[o("el-radio",{attrs:{label:1}},[e._v("是")]),o("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),o("el-form-item",{attrs:{label:"是否热卖",prop:"is_hot"}},[o("el-radio-group",{model:{value:e.currentForm.is_hot,callback:function(t){e.$set(e.currentForm,"is_hot",t)},expression:"currentForm.is_hot"}},[o("el-radio",{attrs:{label:1}},[e._v("是")]),o("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),o("el-divider",{attrs:{"content-position":"left"}},[e._v("购买信息")]),o("el-form-item",{attrs:{label:"市场价",prop:"market_price"}},[o("el-input-number",{attrs:{"controls-position":"right",precision:2,min:0},model:{value:e.currentForm.market_price,callback:function(t){e.$set(e.currentForm,"market_price",t)},expression:"currentForm.market_price"}})],1),o("el-form-item",{attrs:{label:"本店价",prop:"shop_price"}},[o("el-input-number",{attrs:{"controls-position":"right",precision:2,min:0},model:{value:e.currentForm.shop_price,callback:function(t){e.$set(e.currentForm,"shop_price",t)},expression:"currentForm.shop_price"}}),o("div",{staticClass:"help-block"},[o("span",[e._v("多规格商品按实际规格中的本店价计算")])])],1),o("el-form-item",{attrs:{label:"最少起订",prop:"least_sum"}},[o("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:e.currentForm.least_sum,callback:function(t){e.$set(e.currentForm,"least_sum",t)},expression:"currentForm.least_sum"}}),o("div",{staticClass:"help-block"},[o("span",[e._v("该商品最低的起订量，0为不限制")])])],1),o("el-form-item",{attrs:{label:"限购数量",prop:"purchase_sum"}},[o("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:e.currentForm.purchase_sum,callback:function(t){e.$set(e.currentForm,"purchase_sum",t)},expression:"currentForm.purchase_sum"}}),o("div",{staticClass:"help-block"},[o("span",[e._v("同个账号下最多限购该商品的数量，0为不限制")])])],1),o("el-form-item",{attrs:{label:"是否包邮",prop:"is_postage"}},[o("el-radio-group",{model:{value:e.currentForm.is_postage,callback:function(t){e.$set(e.currentForm,"is_postage",t)},expression:"currentForm.is_postage"}},[o("el-radio",{attrs:{label:1}},[e._v("是")]),o("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1)],1):e._e()],1),o("el-tab-pane",{attrs:{label:"规格属性",name:e.tabList[1]}},[e.activeName===e.tabList[1]||e.confirmLoading?o("el-form",{ref:"form_"+e.tabList[1],attrs:{model:e.currentForm,rules:e.rules.form_type,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"商品模型",prop:"goods_type_id"}},[o("el-select",{ref:"typeSelect",staticStyle:{width:"320px"},attrs:{placeholder:"请选择商品模型，试试搜索：手机",filterable:""},on:{change:e.selectGoodsType},model:{value:e.currentForm.goods_type_id,callback:function(t){e.$set(e.currentForm,"goods_type_id",t)},expression:"currentForm.goods_type_id"}},e._l(e.typeData,(function(e){return o("el-option",{key:e.goods_type_id,attrs:{label:e.type_name,value:e.goods_type_id}})})),1)],1),o("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.typeLoading,expression:"typeLoading"}],attrs:{gutter:20}},[o("el-col",{attrs:{span:13}},[o("el-form-item",{attrs:{label:"商品规格"}},[e.currentForm.spec_config.length?o("draggable",{attrs:{list:e.currentForm.spec_config,"component-data":{props:{value:this.activeSpec}},tag:"el-collapse",handle:".spec-handle"}},e._l(e.currentForm.spec_config,(function(t,r){return o("el-collapse-item",{key:t.spec_id,staticClass:"action",attrs:{name:t.spec_id}},[o("template",{slot:"title"},[o("i",{staticClass:"el-icon-sort icon-move cs-pr-10 spec-handle"}),o("div",{staticClass:"spec-more",on:{click:function(e){return e.stopPropagation()}}},[e.activeSpecMore[r]?[o("el-input",{attrs:{size:"mini"},on:{change:function(t){return e.confirmSpecName(r)}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:t.stopPropagation()}},model:{value:t.name,callback:function(o){e.$set(t,"name",o)},expression:"item.name"}},[o("el-select",{staticClass:"type-select",attrs:{slot:"prepend"},slot:"prepend",model:{value:t.spec_type,callback:function(o){e.$set(t,"spec_type",o)},expression:"item.spec_type"}},[o("el-option",{attrs:{label:"文字",value:0}}),o("el-option",{attrs:{label:"图片",value:1}}),o("el-option",{attrs:{label:"颜色",value:2}})],1),o("el-popconfirm",{attrs:{slot:"suffix",title:"确定要执行删除操作吗?",placement:"top"},on:{onConfirm:function(t){return e.delSpec(r)}},slot:"suffix"},[o("i",{staticClass:"el-input__icon el-icon-close",attrs:{slot:"reference"},slot:"reference"})]),o("el-button",{attrs:{slot:"append",icon:"el-icon-d-arrow-left"},on:{click:function(t){return e.setSpecMoreActive(!1,r)}},slot:"append"})],1)]:[o("el-checkbox",{attrs:{indeterminate:t.is_indeterminate},on:{change:function(t){return e.handleCheckAllChange(t,r)}},model:{value:t.check_all,callback:function(o){e.$set(t,"check_all",o)},expression:"item.check_all"}},[e._v(" "+e._s(t.name)+" ")]),o("div",{staticClass:"active",on:{click:function(t){return e.setSpecMoreActive(!0,r)}}},[o("i",{staticClass:"el-input__icon el-icon-d-arrow-right",staticStyle:{color:"#909399","font-size":"12px"}})])]],2)]),o("el-checkbox-group",{staticStyle:{position:"relative"},on:{change:function(t){return e.handleCheckedCitiesChange(t,r)}},model:{value:t.check_list,callback:function(o){e.$set(t,"check_list",o)},expression:"item.check_list"}},[o("draggable",{attrs:{list:t.spec_item,handle:".item-spec-handle"}},e._l(t.spec_item,(function(a,n){return o("div",{key:n,staticClass:"spec-item"},[o("el-checkbox",{staticClass:"spec-check",attrs:{label:a.spec_item_id}}),1===t.spec_type?o("div",{staticClass:"spec-type"},[o("el-popover",{attrs:{placement:"top",trigger:"hover","close-delay":50,disabled:!a.image.length}},[a.image.length>0?o("cs-photo",{attrs:{width:80,height:80},model:{value:a.image,callback:function(t){e.$set(a,"image",t)},expression:"value.image"}}):e._e(),o("el-avatar",{staticClass:"cs-cp spec-position",attrs:{slot:"reference",shape:"square",src:e._f("getPreviewUrl")(a.image[0],"goods_image_x80"),size:27},nativeOn:{click:function(t){return e.setSpecImage(r,n,a.image)}},slot:"reference"},[o("img",{attrs:{src:e.$publicPath+"image/setting/image.png",alt:""}})])],1)],1):e._e(),2===t.spec_type?o("div",{staticClass:"spec-type"},[o("el-color-picker",{staticClass:"spec-position",attrs:{size:"mini"},model:{value:a.color,callback:function(t){e.$set(a,"color",t)},expression:"value.color"}})],1):e._e(),o("el-tag",{staticClass:"cs-cm item-spec-handle",attrs:{type:"info",size:"medium",title:"双击编辑",effect:1!==t.spec_index||1!==a.is_contact?"light":"plain",closable:""},on:{close:function(t){return e.delSpecItem(r,n)}},nativeOn:{dblclick:function(t){return e.dialogSpecItemName(a.item_name,"set",r,n)}}},[e._v(e._s(a.item_name))])],1)})),0)],1),o("el-button-group",{staticClass:"spec-item active",staticStyle:{"padding-bottom":"14px"}},[o("el-button",{attrs:{title:"添加规格项",icon:"el-icon-plus",size:"mini"},on:{click:function(t){return e.dialogSpecItemName(null,"add",r,null)}}}),o("el-button",{attrs:{title:"导入规格项",icon:"el-icon-takeaway-box",size:"mini"},on:{click:function(t){return e.importSpecItem(r)}}})],1)],2)})),1):[o("div",{staticClass:"empty-data"},[e._v("暂无数据")]),o("el-divider")],e.currentForm.goods_type_id?o("div",{staticClass:"cs-mt"},[e.inputSpecVisible?o("el-input",{ref:"addSpecInput",staticStyle:{width:"97px"},attrs:{size:"small"},on:{blur:e.addSpec},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addSpec(t)}},model:{value:e.inputSpecValue,callback:function(t){e.inputSpecValue=t},expression:"inputSpecValue"}}):o("el-button",{staticStyle:{height:"32px"},attrs:{icon:"el-icon-plus",size:"mini"},on:{click:e.showSpecInput}},[e._v("新增规格")])],1):e._e()],2)],1),o("el-col",{attrs:{span:11}},[o("el-form-item",{attrs:{label:"商品属性"}},[e.currentForm.attr_config.length?o("draggable",{attrs:{list:e.currentForm.attr_config,"component-data":{props:{value:this.activeAttr}},tag:"el-collapse",handle:".attr-handle"}},e._l(e.currentForm.attr_config,(function(t,r){return o("el-collapse-item",{key:t.goods_attribute_id,attrs:{name:t.goods_attribute_id}},[o("template",{slot:"title"},[o("i",{staticClass:"el-icon-sort icon-move cs-pr-10 attr-handle"}),o("span",[e._v(e._s(t.attr_name))])]),o("draggable",{staticClass:"el-form el-form--label-left",attrs:{list:t.get_attribute,tag:"form",handle:".item-attr-handle"}},e._l(t.get_attribute,(function(t,a){return o("div",{key:t.goods_attribute_id,staticClass:"el-form-item attr-form"},[o("label",{staticClass:"el-form-item__label attr-label"},[o("i",{staticClass:"el-icon-sort icon-move cs-pr-10 item-attr-handle"}),o("span",{attrs:{title:t.attr_name}},[e._v(e._s(t.attr_name))])]),o("div",{staticClass:"el-form-item__content attr-content"},[0!==t.attr_input_type?o("el-select",{staticStyle:{width:"100%"},attrs:{"multiple-limit":e.inputType[t.attr_input_type].type,placeholder:e.inputType[t.attr_input_type].value,size:"small",filterable:"","allow-create":"","default-first-option":"",multiple:"",clearable:""},model:{value:t.attr_value,callback:function(o){e.$set(t,"attr_value",o)},expression:"value.attr_value"}},e._l(t.attr_values,(function(e,t){return o("el-option",{key:t,attrs:{value:e}})})),1):o("div",[o("el-input",{staticStyle:{width:"90%"},attrs:{type:"textarea",placeholder:e.inputType[t.attr_input_type].value,size:"small",autosize:""},model:{value:t.attr_value,callback:function(o){e.$set(t,"attr_value",o)},expression:"value.attr_value"}}),o("i",{staticClass:"el-icon-copy-document attr-default",attrs:{title:"设为默认值"},on:{click:function(t){return e.setAttrDefaultValue(r,a)}}})],1)],1)])})),0)],2)})),1):[o("div",{staticClass:"empty-data"},[e._v("暂无数据")]),o("el-divider")]],2)],1)],1),o("el-form-item",{attrs:{label:"规格列表"}},[e.currentForm.spec_combo.length?o("el-table",{attrs:{data:e.currentForm.spec_combo,"header-cell-style":{background:"#FFF",padding:"0"},"row-style":{height:"45px"},"span-method":e.specSpanMethod,"cell-class-name":e.specCellClassName,"max-height":"500",size:"small"},on:{"cell-dblclick":e.setComboEdit}},[o("el-table-column",{attrs:{label:"商品规格",align:"center"}},e._l(e.specTable.header,(function(t,r){return o("el-table-column",{key:r,attrs:{index:r,label:t},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",{attrs:{title:t.row.key_value}},[e._v(" "+e._s(e.specTable.index[t.row.key_name[t.column.index]]["itemName"])+" ")])]}}],null,!0)})})),1),o("el-table-column",{attrs:{align:"center"}},[o("template",{slot:"header"},[o("el-tooltip",{attrs:{placement:"top",content:"正数增加，负数减少，双击单元格编辑"}},[o("i",{staticClass:"el-icon-warning-outline cs-mr-10"})]),o("el-popover",{attrs:{placement:"top-start",trigger:"manual"},model:{value:e.specBatch.visible,callback:function(t){e.$set(e.specBatch,"visible",t)},expression:"specBatch.visible"}},[o("el-input-number",{staticStyle:{width:"150px","margin-bottom":"10px"},attrs:{"controls-position":"right",size:"small",precision:"price"===e.specBatch.type?2:0,min:0},model:{value:e.specBatch.value,callback:function(t){e.$set(e.specBatch,"value",t)},expression:"specBatch.value"}}),o("div",{staticClass:"cs-tr"},[o("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.specBatch.visible=!1}}},[e._v("取消")]),o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.batchTableSpec}},[e._v("确定")])],1),o("span",{attrs:{slot:"reference"},slot:"reference"},[e._v("批量设置：")])],1),o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.showBatchSpec("price")}}},[e._v("本店价")]),o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.showBatchSpec("store_qty")}}},[e._v("库存")]),o("el-popover",{attrs:{placement:"top-start",trigger:"manual"},model:{value:e.specCount.visible,callback:function(t){e.$set(e.specCount,"visible",t)},expression:"specCount.visible"}},[o("el-input-number",{staticStyle:{width:"150px","margin-bottom":"10px"},attrs:{"controls-position":"right",size:"small",precision:"price"===e.specCount.type?2:0},model:{value:e.specCount.value,callback:function(t){e.$set(e.specCount,"value",t)},expression:"specCount.value"}}),o("div",{staticClass:"cs-tr"},[o("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.specCount.visible=!1}}},[e._v("取消")]),o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.countTableSpec}},[e._v("确定")])],1),o("span",{staticClass:"cs-ml-10",attrs:{slot:"reference"},slot:"reference"},[e._v("批量加减：")])],1),o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.showCountSpec("price")}}},[e._v("本店价")]),o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.showCountSpec("store_qty")}}},[e._v("库存")])],1),o("el-table-column",{attrs:{label:"本店价",prop:"price",width:"152"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.getEditState(t.$index,"price")?o("div",[e._v(" "+e._s(e._f("getNumber")(t.row.price))+" ")]):o("el-input-number",{ref:"span_table_"+t.$index+"_price",attrs:{size:"mini",controls:!1,precision:2,min:0},on:{blur:function(o){e.specTable.edit[t.$index]["price"]=!1}},nativeOn:{keyup:function(o){if(!o.type.indexOf("key")&&e._k(o.keyCode,"enter",13,o.key,"Enter"))return null;e.specTable.edit[t.$index]["price"]=!1}},model:{value:t.row.price,callback:function(o){e.$set(t.row,"price",o)},expression:"scope.row.price"}})]}}],null,!1,1586584967)}),o("el-table-column",{attrs:{label:"库存",prop:"store_qty",width:"152"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.getEditState(t.$index,"store_qty")?o("div",[e._v(" "+e._s(t.row.store_qty)+" ")]):o("el-input-number",{ref:"span_table_"+t.$index+"_store_qty",attrs:{size:"mini",controls:!1,min:0},on:{blur:function(o){e.specTable.edit[t.$index]["store_qty"]=!1}},nativeOn:{keyup:function(o){if(!o.type.indexOf("key")&&e._k(o.keyCode,"enter",13,o.key,"Enter"))return null;e.specTable.edit[t.$index]["store_qty"]=!1}},model:{value:t.row.store_qty,callback:function(o){e.$set(t.row,"store_qty",o)},expression:"scope.row.store_qty"}})]}}],null,!1,3527608665)}),o("el-table-column",{attrs:{label:"条码",prop:"bar_code",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.getEditState(t.$index,"bar_code")?o("div",[e._v(" "+e._s(t.row.bar_code)+" ")]):o("el-input",{ref:"span_table_"+t.$index+"_bar_code",attrs:{size:"mini",clearable:""},on:{blur:function(o){e.specTable.edit[t.$index]["bar_code"]=!1}},nativeOn:{keyup:function(o){if(!o.type.indexOf("key")&&e._k(o.keyCode,"enter",13,o.key,"Enter"))return null;e.specTable.edit[t.$index]["bar_code"]=!1}},model:{value:t.row.bar_code,callback:function(o){e.$set(t.row,"bar_code",o)},expression:"scope.row.bar_code"}})]}}],null,!1,4022093153)}),o("el-table-column",{attrs:{label:"SKU",prop:"goods_sku",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.getEditState(t.$index,"goods_sku")?o("div",[e._v(" "+e._s(t.row.goods_sku)+" ")]):o("el-input",{ref:"span_table_"+t.$index+"_goods_sku",attrs:{size:"mini",clearable:""},on:{blur:function(o){e.specTable.edit[t.$index]["goods_sku"]=!1}},nativeOn:{keyup:function(o){if(!o.type.indexOf("key")&&e._k(o.keyCode,"enter",13,o.key,"Enter"))return null;e.specTable.edit[t.$index]["goods_sku"]=!1}},model:{value:t.row.goods_sku,callback:function(o){e.$set(t.row,"goods_sku",o)},expression:"scope.row.goods_sku"}})]}}],null,!1,822874561)})],2)],1):[o("div",{staticClass:"empty-data"},[e._v("暂无数据")]),o("el-divider")]],2)],1):e._e()],1),o("el-tab-pane",{attrs:{label:"媒体设置",name:e.tabList[2]}},[e.activeName===e.tabList[2]||e.confirmLoading?o("el-form",{ref:"form_"+e.tabList[2],attrs:{model:e.currentForm,rules:e.rules.form_photo,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"商品相册",prop:"attachment"}},[o("cs-photo",{model:{value:e.currentForm.attachment,callback:function(t){e.$set(e.currentForm,"attachment",t)},expression:"currentForm.attachment"}},[o("template",{slot:"upload"},[e.currentForm.attachment.length?e._e():o("div",{staticClass:"el-upload el-upload--picture-card",staticStyle:{"margin-bottom":"8px"},attrs:{tabindex:"0"},on:{click:function(t){return e.handleUpload(e.getAttachmentFileList,"photo","upload")}}},[o("i",{staticClass:"el-icon-plus"})])])],2),o("el-button",{attrs:{icon:"el-icon-finished",size:"small"},on:{click:function(t){return e.handleStorage(e.getAttachmentFileList,[0,2],"photo")}}},[e._v("资源选择")]),o("el-button",{attrs:{icon:"el-icon-upload2",size:"small"},on:{click:function(t){return e.handleUpload(e.getAttachmentFileList,"photo","upload")}}},[e._v("上传图片")]),o("div",{staticClass:"help-block"},[o("span",[e._v("第一张图片将作为商品主图，拖动可调整图片位置，建议图片尺寸800x800")])])],1),o("el-form-item",{attrs:{label:"视频上传",prop:"video"}},[o("cs-video",{ref:"goodsVideo",staticClass:"input-video",attrs:{"video-data":e.currentForm.video}}),o("el-button",{attrs:{icon:"el-icon-finished",size:"small"},on:{click:function(t){return e.handleStorage(e.getVideoFileList,[2,3],"video")}}},[e._v("资源选择")]),o("el-button",{attrs:{icon:"el-icon-upload2",size:"small"},on:{click:function(t){return e.handleUpload(e.getVideoFileList,"video","upload")}}},[e._v("上传视频")]),e.currentForm.video.url?o("el-button",{attrs:{icon:"el-icon-delete",size:"small"},on:{click:e.delVideoFile}},[e._v("删除")]):e._e(),o("div",{staticClass:"help-block"},[o("span",[e._v("推荐使用mp4格式的视频，同时也支持ogg、webm等格式的视频")])])],1)],1):e._e()],1),o("el-tab-pane",{attrs:{label:"商品详情",name:e.tabList[3]}},[o("el-form",{ref:"form_"+e.tabList[3],attrs:{model:e.currentForm,rules:e.rules.form_detail,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"关键词",prop:"keywords"}},[o("el-input",{attrs:{placeholder:"可输入商品关键词，有利于SEO搜索",clearable:!0},model:{value:e.currentForm.keywords,callback:function(t){e.$set(e.currentForm,"keywords",t)},expression:"currentForm.keywords"}})],1),o("el-form-item",{attrs:{label:"页面描述",prop:"description"}},[o("el-input",{attrs:{placeholder:"可输入商品简单描述，有利于SEO搜索",clearable:!0},model:{value:e.currentForm.description,callback:function(t){e.$set(e.currentForm,"description",t)},expression:"currentForm.description"}})],1),o("el-form-item",{attrs:{label:"详情描述",prop:"content"}},[o("cs-tinymce",{ref:"tinymce",attrs:{code:"inside_content",height:500},model:{value:e.currentForm.content,callback:function(t){e.$set(e.currentForm,"content",t)},expression:"currentForm.content"}})],1)],1)],1),o("el-tab-pane",{attrs:{label:"积分结算",name:"integral"}},["integral"===e.activeName||e.confirmLoading?o("el-form",{attrs:{model:e.currentForm,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"结算方式",prop:"integral_type"}},[o("el-radio-group",{model:{value:e.currentForm.integral_type,callback:function(t){e.$set(e.currentForm,"integral_type",t)},expression:"currentForm.integral_type"}},[o("el-radio",{attrs:{label:0}},[e._v("按百分比")]),o("el-radio",{attrs:{label:1}},[e._v("按固定值")])],1)],1),o("el-form-item",{attrs:{label:"赠送分值",prop:"give_integral"}},[o("el-input-number",{attrs:{precision:e.currentForm.integral_type?0:2,max:e.currentForm.integral_type?void 0:100,min:0,"controls-position":"right"},model:{value:e.currentForm.give_integral,callback:function(t){e.$set(e.currentForm,"give_integral",t)},expression:"currentForm.give_integral"}}),o("div",{staticClass:"help-block"},[e.currentForm.integral_type?o("span",[e._v("按赠送分值设定的值固定赠送积分，赠送分值需大于等于0")]):o("span",[e._v("按实际支付金额百分比赠送，赠送分值的范围是0 ~ 100")])])],1),o("el-form-item",{attrs:{label:"可抵扣额",prop:"is_integral"}},[o("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:e.currentForm.is_integral,callback:function(t){e.$set(e.currentForm,"is_integral",t)},expression:"currentForm.is_integral"}}),o("div",{staticClass:"help-block"},[o("span",[e._v("商品最多允许抵扣多少积分，0为不可使用")])])],1)],1):e._e()],1)],1)],1),o("cs-storage",{ref:"storage",staticStyle:{display:"none"},attrs:{limit:e.uploadConfig.limit},on:{confirm:e.storageCallback}}),o("cs-upload",{ref:"upload",staticStyle:{display:"none"},attrs:{type:"slot",multiple:e.uploadConfig.multiple,accept:e.uploadConfig.accept,limit:e.uploadConfig.limit},on:{confirm:e.uploadCallback}}),o("page-spec",{ref:"importSpec",on:{confirm:e.importSpecData}}),o("el-dialog",{attrs:{title:"规格图片",width:"665px",visible:e.specImageVisible,"append-to-body":!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.specImageVisible=t}}},[o("cs-photo",{staticStyle:{"margin-top":"-25px"},model:{value:e.specImage,callback:function(t){e.specImage=t},expression:"specImage"}},[o("template",{slot:"upload"},[e.specImage.length?e._e():o("div",{staticClass:"empty-data"},[e._v("暂无规格图")])])],2),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("div",{staticClass:"cs-fl"},[o("el-button",{attrs:{icon:"el-icon-finished",size:"small"},on:{click:function(t){return e.handleStorage(e.getSpecImageList,[0,2],"photo")}}},[e._v("资源选择")]),o("el-button",{attrs:{icon:"el-icon-upload2",size:"small"},on:{click:function(t){return e.handleUpload(e.getSpecImageList,"photo","upload")}}},[e._v("上传图片")])],1),o("el-button",{attrs:{size:"small"},nativeOn:{click:function(t){e.specImageVisible=!1}}},[e._v("取消")]),o("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(t){return e.confirmSpecImage(t)}}},[e._v("确定")])],1)],1),o("el-dialog",{attrs:{title:("set"===e.specName.type?"编辑":"添加")+"规格项",visible:e.specName.visible,"append-to-body":!0,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(t){return e.$set(e.specName,"visible",t)}}},[o("el-form",{nativeOn:{submit:function(e){e.preventDefault()}}},[o("el-form-item",["set"===e.specName.type?o("el-input",{ref:"specNameInput",attrs:{placeholder:"请输入规格项名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.confirmSpecItemName(t)}},model:{value:e.specName.value,callback:function(t){e.$set(e.specName,"value",t)},expression:"specName.value"}}):e._e(),"add"===e.specName.type?o("el-input",{ref:"specNameInput",attrs:{placeholder:"请输入规格项名称，一行一个",type:"textarea",rows:5},model:{value:e.specName.value,callback:function(t){e.$set(e.specName,"value",t)},expression:"specName.value"}}):e._e()],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small"},on:{click:function(t){e.specName.visible=!1}}},[e._v("取消")]),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirmSpecItemName}},[e._v("确定")])],1)],1)],1)},a=[],n=(o("99af"),o("7db0"),o("4160"),o("caad"),o("c975"),o("a15b"),o("d81d"),o("a434"),o("b0c0"),o("d3b7"),o("ac1f"),o("2532"),o("3ca3"),o("1276"),o("498a"),o("159b"),o("ddb0"),o("2909")),i=o("b85c"),s=o("5530"),c=o("a2a9"),l=o("ca00"),u=o("60bb"),d=o("5880"),p=o("4239"),m=o("c54e"),f=o("7f04"),b=o("b9ad"),_=o("1610"),h={components:{PageSpec:function(){return o.e("chunk-03bb3d32").then(o.bind(null,"bdb8"))},csUpload:function(){return o.e("chunk-0383e8e2").then(o.bind(null,"8422"))},csStorage:function(){return o.e("chunk-7557cd56").then(o.bind(null,"8704"))},csTinymce:function(){return Promise.all([o.e("chunk-f9dee3be"),o.e("chunk-2d0cc263")]).then(o.bind(null,"4b93"))},csVideo:function(){return o.e("chunk-01cfa9e1").then(o.bind(null,"476d"))},csPhoto:function(){return o.e("chunk-2ef69ad4").then(o.bind(null,"aa07"))},draggable:function(){return Promise.resolve().then(o.t.bind(null,"289a",7))}},props:{confirmLoading:{default:!1},state:{type:String,required:!0,default:"create"}},data:function(){return{activeName:"basic",tabList:["basic","type","photo","detail"],catData:[],brandData:[],typeData:[],stateMap:{create:"新增商品",update:"编辑商品"},inputType:[{value:"请输入自定义内容",type:1},{value:"仅单选或自定义输入",type:1},{value:"可多选或自定义输入",type:2}],storageCallback:"",uploadCallback:"",uploadConfig:{},cascaderProps:{value:"goods_category_id",label:"name",children:"children",checkStrictly:!0,emitPath:!1},currentForm:{goods_id:void 0,goods_category_id:void 0,name:"",short_name:"",product_name:"",goods_code:"",goods_spu:"",goods_sku:"",bar_code:"",brand_id:void 0,store_qty:0,market_price:0,shop_price:0,integral_type:0,give_integral:0,is_integral:0,least_sum:0,purchase_sum:0,keywords:"",description:"",content:"",attachment:[],video:{},unit:"",is_recommend:0,is_new:0,is_hot:0,goods_type_id:void 0,sort:50,status:1,attr_config:[],spec_config:[],spec_combo:[],is_postage:0,measure:0,measure_type:0},rules:{form_basic:{name:[{required:!0,message:"名称不能为空",trigger:"blur"},{max:200,message:"长度不能大于 200 个字符",trigger:"blur"}],short_name:[{max:50,message:"长度不能大于 50 个字符",trigger:"blur"}],product_name:[{max:100,message:"长度不能大于 100 个字符",trigger:"blur"}],goods_category_id:[{required:!0,message:"至少选择一项",trigger:"change"}],goods_code:[{max:50,message:"长度不能大于 50 个字符",trigger:"blur"}],goods_spu:[{max:50,message:"长度不能大于 50 个字符",trigger:"blur"}],goods_sku:[{max:50,message:"长度不能大于 50 个字符",trigger:"blur"}],bar_code:[{max:60,message:"长度不能大于 60 个字符",trigger:"blur"}],unit:[{max:10,message:"长度不能大于 10 个字符",trigger:"blur"}]},form_type:{goods_type_id:[{required:!0,message:"至少选择一项",trigger:"change"}]},form_photo:{attachment:[{required:!0,message:"商品相册不能为空",trigger:"blur"}]},form_detail:{keywords:[{max:255,message:"长度不能大于 255 个字符",trigger:"blur"}],description:[{max:255,message:"长度不能大于 255 个字符",trigger:"blur"}],content:[{required:!0,message:"详情描述不能为空",trigger:"blur"}]}},inputSpecValue:"",inputSpecVisible:!1,typeLoading:!1,activeAttr:[],activeSpec:[],activeSpecMore:{},specTable:[],specImage:[],specImageKey:{},specImageVisible:!1,specName:{value:"",type:"",visible:!1,parent:null,key:null},specBatch:{type:"",value:0,visible:!1},specCount:{type:"",value:0,visible:!1}}},created:function(){document.body.ondrop=function(e){e.preventDefault(),e.stopPropagation()}},filters:{getPreviewUrl:function(e,t){return e&&(e.source||e)?l["a"].getImageCodeUrl(e.source||e,t):""},getNumber:function(e){return l["a"].getNumber(e)}},watch:{"currentForm.spec_config":{handler:function(e){this._handleSpecItemData(e)},deep:!0}},mounted:function(){var e=this;Promise.all([Object(p["d"])({order_field:"phonetic",order_type:"asc"}),Object(f["d"])({order_field:"goods_type_id",order_type:"asc"}),Object(m["d"])(null)]).then((function(t){e.brandData=t[0].data||[],e.typeData=t[1].data||[],e.catData=l["a"].formatDataToTree(t[2].data,"goods_category_id")})).then((function(){"update"===e.state&&e.handleGoodsData(e.$route.params.goods_id)}))},methods:Object(s["a"])(Object(s["a"])({},Object(d["mapActions"])("careyshop/update",["updateData"])),{},{handleConfirm:function(){var e=this;this.$emit("update:confirmLoading",!0),this.$nextTick((function(){var t,o=Object(i["a"])(e.tabList);try{for(o.s();!(t=o.n()).done;){var r=t.value,a=!0;if(e.$refs["form_".concat(r)].validate((function(e){if(!e)return a=!1,!1})),!a)return e.activeName=r,e.$parent.scrollTo(),void e.$emit("update:confirmLoading",!1)}}catch(n){o.e(n)}finally{o.f()}"create"===e.state?e.handleCreate():e.handleUpdate()}))},handleCreate:function(){var e=this;Object(c["a"])(this.currentForm).then((function(t){e.updateData({type:"add",name:"goods-admin-list",data:Object(s["a"])(Object(s["a"])({},t.data),{},{sales_sum:0})}),e.$message.success("操作成功"),e.$emit("close")})).finally((function(){e.$emit("update:confirmLoading",!1)}))},handleUpdate:function(){var e=this;Object(c["l"])(this.currentForm).then((function(t){e.updateData({type:"set",name:"goods-admin-list",srcId:t.data.goods_id,data:Object(s["a"])({},t.data)}),e.$message.success("操作成功"),e.$emit("close")})).finally((function(){e.$emit("update:confirmLoading",!1)}))},handleGoodsData:function(e){var t=this;Promise.all([Object(c["g"])(e),Object(c["e"])(e),Object(c["i"])(e,1)]).then((function(e){var o=e[0].data||{};o.attr_config=e[1].data.attr_config||[],o.spec_config=e[2].data.spec_config||[],o.spec_combo=e[2].data.spec_combo||[],t.activeAttr=e[1].data.attr_key||[],t.activeSpec=e[2].data.spec_key||[],t.isNotTable=!0,t.oldTypeId=o.goods_type_id,t.currentForm=o,t.brandData.find((function(e){return e.brand_id===t.currentForm.brand_id}))||(t.currentForm.brand_id=void 0),t.typeData.find((function(e){return e.goods_type_id===t.currentForm.goods_type_id}))||(t.currentForm.goods_type_id=void 0),t.$nextTick((function(){t.$refs.tinymce&&(t.$refs.tinymce.destroyTinymce(),t.$refs.tinymce.initTinymce(),t.$refs.tinymce.setContent(o.content))}))}))},getEditState:function(e,t){return!!this.specTable.edit&&(!!Object.prototype.hasOwnProperty.call(this.specTable.edit,e)&&!this.specTable.edit[e][t])},handleStorage:function(e){var t=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.storageCallback=e,this.uploadConfig.limit="photo"===r?0:1,this.$nextTick((function(){t.$refs.storage.handleStorageDlg(o)}))},handleUpload:function(e,t,o){var r=this;"video"===t&&(this.uploadConfig={accept:"video/*",multiple:!1,limit:1}),"photo"===t&&(this.uploadConfig={accept:"image/*",multiple:!0,limit:0}),this.uploadCallback=e,this.$nextTick((function(){r.$refs.upload.handleUploadDlg(o)}))},getFileList:function(e,t){if(!t)return e;var o,r=[],a=Object(i["a"])(e);try{for(a.s();!(o=a.n()).done;){var n=o.value;if("success"===n.status){var s=n.response;s&&200===s.status&&s.data&&r.push(s.data[0])}}}catch(c){a.e(c)}finally{a.f()}return r},getVideoFileList:function(e,t){if(e.length){var o,r=this.getFileList(e,t),a=Object(i["a"])(r);try{for(a.s();!(o=a.n()).done;){var n=o.value;if(3===n.type){this.currentForm.video={url:n.url,mime:n.mime,cover:n.cover};break}}}catch(s){a.e(s)}finally{a.f()}}},delVideoFile:function(){var e=this;this.currentForm.video={},this.$nextTick((function(){e.$refs.goodsVideo.delSources()}))},getAttachmentFileList:function(e,t){var o=this;if(e.length){var r=this.getFileList(e,t);r.forEach((function(e){o.currentForm.attachment.push({name:e.name,source:e.url})}))}},selectGoodsType:function(e){var t=this;"create"!==this.state&&this.oldTypeId===e?this.$confirm("检测到您选择了该商品的原模型，是否加载原数据？","提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then((function(){t.isNotTable=!0,t.getGoodsSpenAttr(t.currentForm.goods_id,!0)})).catch((function(){t.getGoodsSpenAttr(e,!1)})):this.getGoodsSpenAttr(e,!1)},getGoodsSpenAttr:function(e,t){var o=this;this.$nextTick((function(){o.$refs.typeSelect.blur()})),this.typeLoading=!0,this.activeSpecMore={};var r=[];r=t?[Object(c["e"])(e),Object(c["i"])(e,1)]:[Object(_["e"])(e),Object(b["d"])(e)],Promise.all(r).then((function(e){o.activeAttr=e[0].data.attr_key||[],o.activeSpec=e[1].data.spec_key||[],o.currentForm.attr_config=e[0].data.attr_config||[],o.currentForm.spec_combo=e[1].data.spec_combo||[],o.currentForm.spec_config=e[1].data.spec_config||[]})).finally((function(){o.typeLoading=!1}))},setAttrDefaultValue:function(e,t){var o=this.currentForm.attr_config[e].get_attribute[t];o&&o.attr_values[0]?this.$set(o,"attr_value",o.attr_values[0]):this.$message.info("该属性项不存在默认值")},showSpecInput:function(){var e=this;this.inputSpecValue="",this.inputSpecVisible=!0,this.$nextTick((function(){e.$refs.addSpecInput.focus()}))},addSpec:function(){if(this.inputSpecValue){var e=-l["a"].randomLenNum(6);this.currentForm.spec_config.push({spec_id:e,goods_type_id:0,name:this.inputSpecValue,spec_index:0,spec_type:0,sort:50,spec_item:[],check_list:[]}),this.activeSpec.push(e)}this.inputSpecVisible=!1,this.inputSpecValue=""},delSpec:function(e){this.currentForm.spec_config.splice(e,1)},setSpecImage:function(e,t,o){this.specImage=Object(n["a"])(o),this.specImageKey={parent:e,key:t},this.specImageVisible=!0},getSpecImageList:function(e,t){var o=this;if(e.length){var r=this.getFileList(e,t);r.forEach((function(e){o.specImage.push({name:e.name,source:e.url})}))}},confirmSpecImage:function(){var e=this.specImageKey,t=e.parent,o=e.key,r=this.currentForm.spec_config[t].spec_item[o];this.$set(r,"image",this.specImage),this.specImageVisible=!1},delSpecItem:function(e,t){var o=this.currentForm.spec_config[e],r=o.check_list.indexOf(o.spec_item[t].spec_item_id);-1!==r&&o.check_list.splice(r,1),o.spec_item.splice(t,1),this.handleCheckedCitiesChange(o.check_list,e)},confirmSpecName:function(e){var t=this.currentForm.spec_config;this.$set(t,e,Object(s["a"])(Object(s["a"])({},t[e]),{},{goods_type_id:0,spec_index:0,spec_id:-l["a"].randomLenNum(6)}))},setSpecMoreActive:function(e,t){this.$set(this.activeSpecMore,t,e)},dialogSpecItemName:function(e,t,o,r){var a=this;this.specName={value:e,type:t,parent:o,key:r,visible:!0},this.$nextTick((function(){a.$refs.specNameInput.select()}))},confirmSpecItemName:function(){if(this.specName.value){var e=this.specName,t=e.parent,o=e.key,r=this.currentForm.spec_config[t];if("add"===this.specName.type){var a=this.specName.value.trim().split("\n");a.forEach((function(e){r.spec_item.push({spec_item_id:-l["a"].randomLenNum(6),item_name:e,is_contact:0,sort:50,image:[],color:""})})),this.handleCheckedCitiesChange(r.check_list,t)}"set"===this.specName.type&&r.spec_item[o].item_name!==this.specName.value&&this.$set(r.spec_item,o,Object(s["a"])(Object(s["a"])({},r.spec_item[o]),{},{is_contact:0,item_name:this.specName.value,spec_item_id:-l["a"].randomLenNum(6)})),this.specName.visible=!1}else this.specName.visible=!1},importSpecItem:function(e){var t=this;this.specName={parent:e},this.$nextTick((function(){t.$refs.importSpec.handleVisible()}))},importSpecData:function(e){if(e.spec_item){var t=this.specName.parent,o=this.currentForm.spec_config[t];e.spec_item.forEach((function(t){var r=o.spec_id===e.spec_id?1:0;o.spec_item.push(Object(s["a"])(Object(s["a"])({},t),{},{is_contact:r,spec_item_id:1!==r?-l["a"].randomLenNum(6):t.spec_item_id}))})),this.handleCheckedCitiesChange(o.check_list,t)}},handleCheckAllChange:function(e,t){var o=this.currentForm.spec_config[t],r=o.spec_item.map((function(e){return e.spec_item_id}));this.$set(o,"check_list",e?r:[]),this.$set(o,"is_indeterminate",!1)},handleCheckedCitiesChange:function(e,t){var o=e.length,r=this.currentForm.spec_config[t];this.$set(r,"check_all",o===r.spec_item.length&&o>0),this.$set(r,"is_indeterminate",o>0&&o<r.spec_item.length)},showBatchSpec:function(e){this.specBatch.value=0,this.specBatch.type=e,this.specBatch.visible=!0},batchTableSpec:function(){var e=this.currentForm.spec_combo;for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(e[t][this.specBatch.type]=this.specBatch.value);this.specBatch.visible=!1},showCountSpec:function(e){this.specCount.value=0,this.specCount.type=e,this.specCount.visible=!0},countTableSpec:function(){var e=this.currentForm.spec_combo;for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var o=e[t][this.specCount.type]+this.specCount.value;e[t][this.specCount.type]=o>=0?o:0}this.specCount.visible=!1},specSpanMethod:function(e){var t=e.column,o=e.rowIndex,r=e.columnIndex;if(void 0!==t.index&&this.specTable.column[o])return[this.specTable.column[o][r],1]},specCellClassName:function(e){var t=e.column;return["price","store_qty","bar_code","goods_sku"].includes(t.property)?"cs-cp":""},setComboEdit:function(e,t){var o=this;t.index>=0||(this.specTable.edit[e.id][t.property]=!0,this.$nextTick((function(){o.$refs["span_table_".concat(e.id,"_").concat(t.property)].focus()})))},_handleSpecItemData:Object(u["debounce"])((function(e){var t=this,o={index:{},edit:{},column:[],header:[],compose:[]};e.forEach((function(e){var t={key:[],item:[],name:e.name};e.spec_item.forEach((function(r){e.check_list.includes(r.spec_item_id)&&(t.key.push(r.spec_item_id),t.item.push(r.item_name),o.index[r.spec_item_id]={specName:e.name,itemName:r.item_name})})),t.item.length>0&&(o.compose.push(t.key),o.header.push(e.name))}));var r=function(e){var t="";return e.forEach((function(e){if(Object.prototype.hasOwnProperty.call(o.index,e)){var r=o.index[e];t+=" ".concat(r.specName,":").concat(r.itemName)}})),t.trim()},a=[],i={},s=l["a"].descartes(o.compose);if(this.isNotTable||this.currentForm.spec_combo.forEach((function(e){var t=e.key_name.sort().join("_");i[t]=e})),s.length>0)for(var c=s.length,u=s[0].length||0,d=0;d<u;d++)for(var p=0,m=0;m<c;m++)o.column[m]||(o.column[m]=[]),o.column[m][d]=o.column[p][d]>1?0:1,s[m+1]&&s[m][d+1]&&(s[m+1][d]===s[m][d]?o.column[p][d]++:p=m+1);s.forEach((function(e,s){if(!t.isNotTable){var c,l=Array.isArray(e),u=l?Object(n["a"])(e).sort().join("_"):e;c=Object.prototype.hasOwnProperty.call(i,u)?{price:i[u].price,store_qty:i[u].store_qty,bar_code:i[u].bar_code,goods_sku:i[u].goods_sku}:{price:0,store_qty:0,bar_code:"",goods_sku:""},c.id=s,c.key_name=l?e:[e],c.key_value=r(Object(n["a"])(c.key_name)),a.push(c)}t.isNotTable&&t.currentForm.spec_combo&&(t.currentForm.spec_combo[s].id=[s]),o.edit[s]={price:!1,store_qty:!1,bar_code:!1,goods_sku:!1}})),this.specTable=o,this.isNotTable||this.$set(this.currentForm,"spec_combo",a),this.isNotTable=!1}),300)})},g=h,v=(o("58ef"),o("2877")),y=Object(v["a"])(g,r,a,!1,null,"4dedb9ad",null);t["default"]=y.exports}}]);